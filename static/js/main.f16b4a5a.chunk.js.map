{"version":3,"sources":["TxList.js","App.js","index.js"],"names":["TxList","_ref","txs","length","_jsx","_Fragment","children","map","item","className","_jsxs","from","to","amount","href","concat","txHash","App","_useState","useState","_useState2","_slicedToArray","setTxs","_useState3","_useState4","contractListened","setContractListened","_useState5","_useState6","_useState7","address","tokenName","tokenSymbol","totalSupply","_useState8","contractInfo","setContractInfo","_useState9","balance","_useState10","balanceInfo","setBalanceInfo","useEffect","provider","ethers","providers","Web3Provider","window","ethereum","erc20","Contract","erc20abi","on","event","console","log","currentTxs","_toConsumableArray","transactionHash","String","removeAllListeners","handleSubmit","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","data","wrap","_context","prev","next","preventDefault","FormData","target","get","name","sent","symbol","stop","_x","apply","arguments","getMyBalance","_ref2","_callee2","signer","signerAddress","_context2","send","getSigner","getAddress","balanceOf","handleTransfer","_ref3","_callee3","_context3","transfer","_x2","onSubmit","type","placeholder","deployedAt","onClick","rootElement","document","getElementById","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.f16b4a5a.chunk.js","sourcesContent":["export default function TxList({ txs }) {\n  if (txs.length === 0) return null;\n  return (\n    <>\n      {txs.map((item) => (\n        <div key={item.txHash} className=\"alert-info mt-5 rounded-xl py-2 px-4\">\n          <div>\n            <p>From: {item.from}</p>\n            <p>To: {item.to}</p>\n            <p>Amount: {item.amount}</p>\n            <a href={`https://rinkeby.etherscan.io/tx/${item.txHash}`}>\n              Check in block explorer\n            </a>\n          </div>\n        </div>\n      ))}\n    </>\n  );\n}\n","import { useState, useEffect } from \"react\";\nimport { ethers } from \"ethers\";\nimport erc20abi from \"./ERC20abi.json\";\nimport ErrorMessage from \"./ErrorMessage\";\nimport TxList from \"./TxList\";\n\nexport default function App() {\n  const [txs, setTxs] = useState([]);\n  const [contractListened, setContractListened] = useState();\n  const [error, setError] = useState();\n  const [contractInfo, setContractInfo] = useState({\n    address: \"-\",\n    tokenName: \"-\",\n    tokenSymbol: \"-\",\n    totalSupply: \"-\"\n  });\n  const [balanceInfo, setBalanceInfo] = useState({\n    address: \"-\",\n    balance: \"-\"\n  });\n\n  useEffect(() => {\n    if (contractInfo.address !== \"-\") {\n      const provider = new ethers.providers.Web3Provider(window.ethereum);\n      const erc20 = new ethers.Contract(\n        contractInfo.address,\n        erc20abi,\n        provider\n      );\n\n      erc20.on(\"Transfer\", (from, to, amount, event) => {\n        console.log({ from, to, amount, event });\n\n        setTxs((currentTxs) => [\n          ...currentTxs,\n          {\n            txHash: event.transactionHash,\n            from,\n            to,\n            amount: String(amount)\n          }\n        ]);\n      });\n      setContractListened(erc20);\n\n      return () => {\n        contractListened.removeAllListeners();\n      };\n    }\n  }, [contractInfo.address]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const data = new FormData(e.target);\n    const provider = new ethers.providers.Web3Provider(window.ethereum);\n\n    const erc20 = new ethers.Contract(data.get(\"addr\"), erc20abi, provider);\n\n    const tokenName = await erc20.name();\n    const tokenSymbol = await erc20.symbol();\n    const totalSupply = await erc20.totalSupply();\n\n    setContractInfo({\n      address: data.get(\"addr\"),\n      tokenName,\n      tokenSymbol,\n      totalSupply\n    });\n  };\n\n  const getMyBalance = async () => {\n    const provider = new ethers.providers.Web3Provider(window.ethereum);\n    await provider.send(\"eth_requestAccounts\", []);\n    const erc20 = new ethers.Contract(contractInfo.address, erc20abi, provider);\n    const signer = await provider.getSigner();\n    const signerAddress = await signer.getAddress();\n    const balance = await erc20.balanceOf(signerAddress);\n\n    setBalanceInfo({\n      address: signerAddress,\n      balance: String(balance)\n    });\n  };\n\n  const handleTransfer = async (e) => {\n    e.preventDefault();\n    const data = new FormData(e.target);\n    const provider = new ethers.providers.Web3Provider(window.ethereum);\n    await provider.send(\"eth_requestAccounts\", []);\n    const signer = await provider.getSigner();\n    const erc20 = new ethers.Contract(contractInfo.address, erc20abi, signer);\n    await erc20.transfer(data.get(\"recipient\"), data.get(\"amount\"));\n  };\n\n  return (\n    <div className=\"grid grid-cols-1 gap-2 md:grid-cols-2\">\n      <div>\n        <form className=\"m-4\" onSubmit={handleSubmit}>\n          <div className=\"credit-card w-full lg:w-3/4 sm:w-auto shadow-lg mx-auto rounded-xl bg-white\">\n            <main className=\"mt-4 p-4\">\n              <h1 className=\"text-xl font-semibold text-gray-700 text-center\">\n                Read from smart contract\n              </h1>\n              <div className=\"\">\n                <div className=\"my-3\">\n                  <input\n                    type=\"text\"\n                    name=\"addr\"\n                    className=\"input input-bordered block w-full focus:ring focus:outline-none\"\n                    placeholder=\"ERC20 contract address\"\n                  />\n                </div>\n              </div>\n            </main>\n            <footer className=\"p-4\">\n              <button\n                type=\"submit\"\n                className=\"btn btn-primary submit-button focus:ring focus:outline-none w-full\"\n              >\n                Get token info\n              </button>\n            </footer>\n            <div className=\"px-4\">\n              <div className=\"overflow-x-auto\">\n                <table className=\"table w-full\">\n                  <thead>\n                    <tr>\n                      <th>Name</th>\n                      <th>Symbol</th>\n                      <th>Total supply</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    <tr>\n                      <th>{contractInfo.tokenName}</th>\n                      <td>{contractInfo.tokenSymbol}</td>\n                      <td>{String(contractInfo.totalSupply)}</td>\n                      <td>{contractInfo.deployedAt}</td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n            </div>\n            <div className=\"p-4\">\n              <button\n                onClick={getMyBalance}\n                type=\"submit\"\n                className=\"btn btn-primary submit-button focus:ring focus:outline-none w-full\"\n              >\n                Get my balance\n              </button>\n            </div>\n            <div className=\"px-4\">\n              <div className=\"overflow-x-auto\">\n                <table className=\"table w-full\">\n                  <thead>\n                    <tr>\n                      <th>Address</th>\n                      <th>Balance</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    <tr>\n                      <th>{balanceInfo.address}</th>\n                      <td>{balanceInfo.balance / 1000000000000000000}</td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          </div>\n        </form>\n        <div className=\"m-4 credit-card w-full lg:w-3/4 sm:w-auto shadow-lg mx-auto rounded-xl bg-white\">\n          <div className=\"mt-4 p-4\">\n            <h1 className=\"text-xl font-semibold text-gray-700 text-center\">\n              Write to contract\n            </h1>\n\n            <form onSubmit={handleTransfer}>\n              <div className=\"my-3\">\n                <input\n                  type=\"text\"\n                  name=\"recipient\"\n                  className=\"input input-bordered block w-full focus:ring focus:outline-none\"\n                  placeholder=\"Recipient address\"\n                />\n              </div>\n              <div className=\"my-3\">\n                <input\n                  type=\"text\"\n                  name=\"amount\"\n                  className=\"input input-bordered block w-full focus:ring focus:outline-none\"\n                  placeholder=\"Amount to transfer\"\n                />\n              </div>\n              <footer className=\"p-4\">\n                <button\n                  type=\"submit\"\n                  className=\"btn btn-primary submit-button focus:ring focus:outline-none w-full\"\n                >\n                  Transfer\n                </button>\n              </footer>\n            </form>\n          </div>\n        </div>\n      </div>\n      <div>\n        <div className=\"m-4 credit-card w-full lg:w-3/4 sm:w-auto shadow-lg mx-auto rounded-xl bg-white\">\n          <div className=\"mt-4 p-4\">\n            <h1 className=\"text-xl font-semibold text-gray-700 text-center\">\n              Recent transactions\n            </h1>\n            <p>\n              <TxList txs={txs} />\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { StrictMode } from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n  <StrictMode>\n    <App />\n  </StrictMode>,\n  rootElement\n);\n"],"sourceRoot":""}